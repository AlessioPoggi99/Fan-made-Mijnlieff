(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[141],{2619:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/play",function(){return e(1500)}])},1500:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return N}});var r=e(1799),i=e(797),o=e(5893),s=e(7294),a=e(3747),l=e(1163),u=e(3658),c=e(6254),d=e(8008),p=e(2519),f=e(8029),m=e(5490),h=e(4614),g=e(4319),y=e(7391),x=e(1360),b=e(10),v=e(92),j=e(8491),w=e(3364),C=e(2857),S=e(725),E=e(2710),_=e(4482),P=e(8083),k=e(7516),G=function(t){var n=[];return t.forEach((function(t){t.isPlayable&&t.isEmpty&&n.push(t)})),n},A=function(t){var n=[];return t.tiles.forEach((function(t){t.isPlayed||n.push(t)})),n},R=function(t){var n,e=t.isVisible,r=t.bg;return n=e?{opacity:1}:{opacity:0},(0,o.jsx)(f.x,{as:a.E.div,width:"100%",height:1,bg:r,borderRadius:"xl",animate:n})},T=function(t){var n=t.isOpen,e=t.onClose,r=t.resetGame;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(m.u_,{size:{md:"sm",base:"xs"},isCentered:!0,isOpen:n,onClose:e,children:[(0,o.jsx)(h.Z,{}),(0,o.jsxs)(g.h,{children:[(0,o.jsx)(y.x,{textAlign:"center",children:"Restart game"}),(0,o.jsx)(x.o,{}),(0,o.jsx)(b.f,{children:(0,o.jsxs)(d.g,{children:[(0,o.jsx)(v.x,{fontWeight:"bold",children:"Do you want to restart the game?"}),(0,o.jsxs)(d.g,{width:"100%",children:[(0,o.jsx)(j.z,{width:"60%",colorScheme:"teal",variant:"solid",onClick:r,children:"Restart"}),(0,o.jsx)(j.z,{width:"60%",colorScheme:"teal",variant:"outline",onClick:e,children:"Close"})]})]})}),(0,o.jsx)(w.m,{})]})]})})},N=function(){var t=(0,s.useState)(-1),n=t[0],e=t[1],a=(0,s.useState)(),f=a[0],m=a[1],h=(0,s.useState)(),g=h[0],y=h[1],x=(0,s.useState)(),b=x[0],v=x[1],j=(0,s.useState)(),w=j[0],N=j[1],Z=(0,s.useState)(!1),O=Z[0],I=Z[1],M=(0,s.useState)([0,0]),X=M[0],$=M[1],z=(0,l.useRouter)(),V=parseInt(z.query.flip,10),F=parseInt(z.query.ai,10),L=(0,u.q)(),q=L.isOpen,B=L.onOpen,Q=L.onClose;(0,s.useEffect)((function(){W()}),[]),(0,s.useEffect)((function(){K()}),[n]);var W=function(){e(-1),N(),D(),U(),I(!1),$([0,0]),Q(),e(0)},D=function(){for(var t=[],n=0;n<16;n++)t.push({position:n,isEmpty:!0,isLastPlayed:!1,isPlayable:5!==n&&6!==n&&9!==n&&10!==n,type:"",color:""});m(t)},H=function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(w||o){w=w||o;var s=(0,i.Z)(f),a=(0,r.Z)({},s[t.position]);a.type=w.type,a.color=w.color,a.isEmpty=!1,a.isLastPlayed=!0,s[t.position]=a;var l=(0,_.Zr)(w.type,t.position);s.forEach((function(n,e){e!==t.position&&(n.isLastPlayed=!1,n.isPlayable=!1)}));var u=!1;l.forEach((function(t){s[t].isEmpty&&(u=!0),s[t].isPlayable=!0})),J(),(0,_.f0)(u,n,g,b)?(s.forEach((function(t){return t.isPlayable=!1})),$((0,_.jX)(s)),setTimeout((function(){I(!0)}),750)):u?e(n+1):(e(n+2),s.forEach((function(t){return t.isPlayable=!0}))),m(s)}},U=function(){for(var t=[{},{}],n=0;n<2;n++){t[n].number=n+1,t[n].color=n?"pink":"blue";for(var e=[],r=0;r<8;r++)e.push({position:r,isPlayed:!1,isSelected:!1,type:r<2?"pusher":r<4?"puller":r<6?"straight":"diagonal",color:n?"pink":"blue"});t[n].tiles=e}y(t[0]),v(t[1])},Y=function(t){var e=!t.isSelected,r=n%2===0?g:b;r.tiles.forEach((function(t){return t.isSelected=!1})),r.tiles[t.position].isSelected=e,N(e?t:null),n%2===0?y(r):v(r)},J=function(){var t=n%2===0?g:b;t.tiles.forEach((function(t,n){t.isSelected=!1,n===w.position&&(t.isPlayed=!0)})),n%2===0?y(t):v(t),N(null)},K=function(){if(F&&F===n%2+1){var t=1===F?g:b;if(f&&t){var e=function(t,n){var e=G(t),r=A(n);return{aiSelection:r[Math.floor(Math.random()*r.length)],boardTile:e[Math.floor(Math.random()*e.length)]}}(f,t),r=e.aiSelection,i=e.boardTile;setTimeout((function(){H(i,r)}),1500)}}};return(0,o.jsxs)(C.Z,{title:"Play",children:[(0,o.jsxs)(c.W,{minH:"calc(100vh - 56px - 32px)",display:"flex",alignItems:"center",justifyContent:"center",children:[(0,o.jsxs)(d.g,{spacing:10,children:[(0,o.jsxs)(d.g,{spacing:2,children:[(0,o.jsx)(R,{isVisible:!O&&(V?!(n%2):!!(n%2)),bg:V?"blue.600":"pink.600"}),(0,o.jsx)(E.Z,{player:V?g:b,turn:n,onPlayerTileClick:Y}),(0,o.jsx)(R,{isVisible:!O&&(V?!(n%2):!!(n%2)),bg:V?"blue.600":"pink.600"})]}),(0,o.jsx)(S.Z,{board:f,turn:n,onBoardTileClick:H}),(0,o.jsxs)(d.g,{spacing:2,children:[(0,o.jsx)(R,{isVisible:!O&&(V?!!(n%2):!(n%2)),bg:V?"pink.600":"blue.600"}),(0,o.jsx)(E.Z,{player:V?b:g,turn:n,onPlayerTileClick:Y}),(0,o.jsx)(R,{isVisible:!O&&(V?!!(n%2):!(n%2)),bg:V?"pink.600":"blue.600"})]})]}),(0,o.jsx)(T,{isOpen:q,onClose:Q,resetGame:W}),(0,o.jsx)(P.Z,{gameOver:O,points:X,resetGame:W,board:f})]}),(0,o.jsx)(p.h,{colorScheme:"gray",variant:"outline","aria-label":"Restart game",size:"md",icon:(0,o.jsx)(k.oAZ,{}),pos:"absolute",top:"0px",right:"-8px",onClick:B})]})}},9099:function(t,n,e){"use strict";e.d(n,{P:function(){return u}});var r=e(5893),i=e(1185),o=e(7155),s=e(9381),a=e(5779);function l(t){return(0,i.XQ)(t,(t=>"auto"===t?"auto":`span ${t}/span ${t}`))}const u=(0,s.G)((function(t,n){const{area:e,colSpan:i,colStart:s,colEnd:u,rowEnd:c,rowSpan:d,rowStart:p,...f}=t,m=(0,o.o)({gridArea:e,gridColumn:l(i),gridRow:l(d),gridColumnStart:s,gridColumnEnd:u,gridRowStart:p,gridRowEnd:c});return(0,r.jsx)(a.m.div,{ref:n,__css:m,...f})}));u.displayName="GridItem"},6610:function(t,n,e){"use strict";e.d(n,{r:function(){return s}});var r=e(5893),i=e(9381),o=e(5779);const s=(0,i.G)((function(t,n){const{templateAreas:e,gap:i,rowGap:s,columnGap:a,column:l,row:u,autoFlow:c,autoRows:d,templateRows:p,autoColumns:f,templateColumns:m,...h}=t,g={display:"grid",gridTemplateAreas:e,gridGap:i,gridRowGap:s,gridColumnGap:a,gridAutoColumns:f,gridColumn:l,gridRow:u,gridAutoFlow:c,gridAutoRows:d,gridTemplateRows:p,gridTemplateColumns:m};return(0,r.jsx)(o.m.div,{ref:n,__css:g,...h})}));s.displayName="Grid"},3321:function(t,n,e){"use strict";e.d(n,{M:function(){return l}});var r=e(5893),i=e(1185),o=e(6610),s=e(7984),a=e(52);const l=(0,e(9381).G)((function(t,n){const{columns:e,spacingX:l,spacingY:u,spacing:c,minChildWidth:d,...p}=t,f=(0,s.F)(),m=d?function(t,n){return(0,i.XQ)(t,(t=>{const e=(0,a.LP)("sizes",t,"number"===typeof(r=t)?`${r}px`:r)(n);var r;return null===t?null:`repeat(auto-fit, minmax(${e}, 1fr))`}))}(d,f):(h=e,(0,i.XQ)(h,(t=>null===t?null:`repeat(${t}, minmax(0, 1fr))`)));var h;return(0,r.jsx)(o.r,{ref:n,gap:c,columnGap:l,rowGap:u,templateColumns:m,...p})}));l.displayName="SimpleGrid"},1360:function(t,n,e){"use strict";e.d(n,{o:function(){return l}});var r=e(5893),i=e(4926),o=e(8928),s=e(5490),a=e(1856);const l=(0,e(9381).G)(((t,n)=>{const{onClick:e,className:l,...u}=t,{onClose:c}=(0,s.vR)(),d=(0,i.cx)("chakra-modal__close-btn",l),p=(0,s.I_)();return(0,r.jsx)(a.P,{ref:n,__css:p.closeButton,className:d,onClick:(0,o.v)(e,(t=>{t.stopPropagation(),c()})),...u})}));l.displayName="ModalCloseButton"},797:function(t,n,e){"use strict";function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function i(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"===typeof t)return r(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}e.d(n,{Z:function(){return i}})}},function(t){t.O(0,[866,874,257,912,774,888,179],(function(){return n=2619,t(t.s=n);var n}));var n=t.O();_N_E=n}]);